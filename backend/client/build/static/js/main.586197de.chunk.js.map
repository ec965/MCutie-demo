{"version":3,"sources":["nav/navitems.js","components/page.js","components/layout.js","components/table.js","util.js","data/chart.js","data/table.js","data/topics.js","data/index.js","components/form.js","components/toggle.js","livedash/subs.js","livedash/chart.js","livedash/table.js","livedash/publisher.js","livedash/index.js","nav/footer.js","nav/index.js","index.js"],"names":["NavGroup","props","className","children","NavBar","NavItem","NavLogo","Page","Column","Row","Table","TableHead","TableItem","name","onClick","id","TableRow","upperFirstLetter","str","length","toUpperCase","substr","colors","formatDateTime","unixtime","time","Date","getMonth","getDate","getHours","getMinutes","getSeconds","CustomToolTip","payload","label","active","unit","value","GenericChart","useState","width","setWidth","height","setHeight","useEffect","window","innerWidth","topic","LineChart","data","margin","top","bottom","left","right","Line","type","dataKey","dot","stroke","strokeWidth","CartesianGrid","Tooltip","content","XAxis","scale","domain","interval","tickFormatter","formatShortDateTime","position","offset","fill","allowDataOverflow","YAxis","angle","DataTable","rows","reverse","map","r","i","strTime","getFullYear","formatFullDateTime","createdAt","message","TableOfTopics","topics","to","routeUrl","TopicChart","setData","split","fetch","URL","then","response","json","parseFloat","parse","DashBoard","setTopics","res","replaceAll","charts","exact","path","Form","onSubmit","FormItem","placeholder","onChange","FormButton","Toggle","SubForm","TableOfSubs","toggleDel","setToggleDel","subs","setSubs","newSub","setNewSub","newQos","setNewQos","refetch","setRefetch","handleDelete","event","reqOpt","method","headers","body","qs","stringify","target","ok","Error","status","catch","err","console","log","preventDefault","qos","checked","LiveChart","LiveTopics","liveTopic","setLiveTopic","chartData","setChartData","prevTopic","ref","useRef","current","usePrevious","ws","onmessage","JSON","newChartData","messages","push","send","request","handleClick","txData","LivePublisher","LiveDash","WebSocket","state","this","onopen","onclose","close","React","Component","Footer","href","MyNavBar","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.586197de.chunk.js","sourcesContent":["import React from 'react';\n\nexport const NavGroup = (props) => {\n  return(\n    <div className=\"nav-group\">\n      {props.children}\n    </div>\n  );\n}\n\nexport const NavBar = (props) => {\n  return(\n    <div className=\"nav-bar\">\n      {props.children}\n    </div>\n  );\n}\n\nexport const NavItem = (props) => {\n  return(\n    <div className=\"nav-item\">\n      <h2>{props.children}</h2>\n    </div>\n  )\n}\n\nexport const NavLogo = (props) => {\n  return(\n    <div className=\"nav-logo\">\n      <h1>{props.children}</h1>\n    </div>\n  )\n}","import React from 'react';\n\nconst Page = (props) => {\n  return(\n    <div className=\"page\">\n      {props.children}\n    </div>\n  );\n}\n\nexport default Page;","import React from 'react';\n\nexport const Column = (props) => <div className={\"col \" + props.className}>{props.children}</div>\nexport const Row = (props) => <div className={\"row \" + props.className }>{props.children}</div>","import React from 'react';\n\nexport const Table = (props) => {\n  return(\n    <table className=\"table\">\n      <tbody>\n        {props.children}\n      </tbody>\n    </table>\n  );\n}\n\nexport const TableHead = (props) => {\n  return(\n    <th className={\"table-head \" + props.className}>{props.children}</th>\n  );\n}\n\nexport const TableItem = (props) => {\n  return(<td name={props.name} onClick={props.onClick} id={props.id} className={\"table-item \" + props.className}>{props.children}</td>);\n}\n\nexport const TableRow = (props) => {\n  return (<tr onClick={props.onClick} id={props.id} className={\"table-row \" + props.className}>{props.children}</tr>)\n}","\nimport {useRef, useEffect} from 'react';\n\nexport const upperFirstLetter = (str) => {\n  if (typeof str !== 'undefined' && str.length > 0){\n    return str[0].toUpperCase() + str.substr(1);\n  }\n}\nexport const url_replacement = (str) => {\n  return str.replaceAll(\"/\", \"_\").replaceAll(\"%\",'-');\n}\n\n// api routes\nconst IPADDRESS = 'm-cutie.herokuapp.com';\n\nexport const URL = `/`;\nexport const GETTOPICS = \"mqtt/t\";\nexport const GETMSG = \"mqtt/m?topic=\";\nexport const GETSUB = \"mqtt/s\";\nexport const WEBSOCKET=`/live`;\n\n\nexport const colors={\n  base00:   '#657B83',\n  base01:   '#586E75',\n  base02:   '#073642',\n  base03:   '#002b36',\n  base1:    '#93a1a1',\n  base2:    '#eee8d5',\n  base3:    '#fdf6e3',\n  yellow:   '#b58900',\n  orange:   '#cb4b16',\n  red:      '#dc322f',\n  magenta:  '#d33682',\n  violet:   '#6c71c4',\n  blue:     '#268bd2',\n  cyan:     '#2aa198',\n  green:    '#859900',\n}\n\n// Do/HH:mm\nexport const formatShortDateTime = (unixtime) => {\n  const time = new Date(unixtime);\n  return `${time.getDate()}/${time.getHours()}:${time.getMinutes()}`;\n}\n// MM/DD HH:mm:ss\nexport const formatDateTime = (unixtime) => {\n  const time = new Date(unixtime);\n  return `${time.getMonth()+1}/${time.getDate()} ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n}\n\nexport const formatFullDateTime = (unixtime) => {\n  const time = new Date(unixtime);\n  return `${time.getMonth()+1}/${time.getDate()}/${time.getFullYear()} ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n}\n\nexport const usePrevious = (value) => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}","import React, { useEffect, useState } from \"react\";\nimport {\n  LineChart,\n  Line,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n} from \"recharts\";\nimport {colors, formatDateTime, formatShortDateTime} from '../util.js';\n\n\nconst CustomToolTip = ({payload, label, active, unit}) => {\n  if(active && payload !== null && typeof payload !== \"undefined\"){\n    if (payload.length > 0){\n      return(\n        <div className=\"tool-tip\">\n          <p>{`${payload[0].value} ${unit}`}</p>\n          <p>{formatDateTime(label)}</p>\n        </div>\n      );\n    }\n  }\n  return(<p>placeholder</p>);\n}\n\nconst GenericChart = (props) => {\n  const [width, setWidth] = useState(960);\n  const [height, setHeight] = useState(540)\n  const margin = 15;\n  const unit = props.unit;\n\n  useEffect(()=>{\n    if (window.innerWidth < 1000){\n      setWidth(640);\n      setHeight(360);\n    }\n    if (window.innerWidth < 400){\n      setWidth(256);\n      setHeight(144);\n    }\n  });\n\n  return (\n    <div className=\"chart\">\n      <h2>{props.topic}</h2>\n      <LineChart width={width} height={height} data={props.data}\n        margin={{top:margin, bottom: margin, left: margin, right: margin}}>\n        <Line \n          type=\"linear\" \n          dataKey=\"message\" \n          dot={false} \n          stroke={colors.magenta} \n          strokeWidth={1.75}\n        />\n        <CartesianGrid stroke={colors.base1} />\n        <Tooltip\n          content={<CustomToolTip/>}\n          unit={unit}\n        />\n        <XAxis\n          dataKey=\"createdAt\"\n          scale=\"time\"\n          type=\"number\"\n          domain={['dataMin', 'dataMax']}\n          interval=\"preserveStartEnd\"\n          tickFormatter={unixtime => formatShortDateTime(unixtime)}\n          label={{ value: \"Time (Date/HH:mm)\", position: \"insideBottom\", offset: -8, fill:colors.base1 }}\n          stroke={colors.base2}\n          height={42}\n          allowDataOverflow={false}\n        />\n        <YAxis\n          label={{ value: `${props.label} (${props.unit})`, position: \"insideLeft\", angle: -90, fill:colors.base1}}\n          stroke={colors.base2}\n          dataKey=\"message\"\n          type=\"number\"\n          interval={0}\n        />\n      </LineChart>\n    </div>\n  );\n}\n\nexport default GenericChart;","import React from 'react';\nimport {Table, TableHead, TableRow, TableItem} from \"../components/table.js\";\nimport {formatFullDateTime} from '../util.js';\n\nconst DataTable = (props) => {\n  const rows = props.data.reverse().map((r,i) => { //get it from oldest to newest\n    let strTime = formatFullDateTime(r.createdAt);\n    return(\n      <TableRow key={i}>\n        <TableItem>\n          {props.data.length-i}\n        </TableItem>\n        <TableItem>\n          {r.message}\n        </TableItem>\n        <TableItem>\n          {strTime}\n        </TableItem>\n      </TableRow>\n    );\n  });\n\n  return(\n    <Table>\n      <TableRow>\n        <TableHead>Index</TableHead>\n        <TableHead>{`${props.label} (${props.unit})`}</TableHead>\n        <TableHead>Time</TableHead>\n      </TableRow>\n      {rows}\n    </Table>\n  );\n}\nexport default DataTable;","import React , {useState, useEffect} from \"react\";\nimport {Table, TableHead, TableRow, TableItem} from \"../components/table.js\";\nimport {\n  Link,\n} from \"react-router-dom\";\nimport {URL, GETMSG, upperFirstLetter} from \"../util.js\";\nimport GenericChart from \"./chart.js\";\nimport {Column} from \"../components/layout.js\";\nimport DataTable from './table.js';\n\nexport const TableOfTopics = (props) => {\n\n  const rows = props.topics.map((r, i) => {\n    return(\n      <TableRow key={i}>\n        <TableItem>\n          <Link to={r.routeUrl}>\n            {r.topic}\n          </Link>\n        </TableItem>\n      </TableRow>\n    );\n  });\n\n  return (\n    <Table>\n      <TableRow>\n        <TableHead>Topics</TableHead>\n      </TableRow>\n      {rows}\n    </Table>\n  );\n}\n\nexport const TopicChart = (props) => {\n\n  const [data, setData] = useState([]);\n  const label = upperFirstLetter(props.topic.split(\"/\")[props.topic.split(\"/\").length-2]);\n  const unit = props.topic.split(\"/\")[props.topic.split(\"/\").length-1];\n\n  useEffect(() => {\n    fetch(URL + GETMSG + props.topic)\n      .then((response) => response.json())\n      .then((data) => {\n        for (let i=0; i<data.length; i++){\n          data[i].message = parseFloat(data[i].message);\n          data[i].createdAt = Date.parse(data[i].createdAt);\n        }\n        setData(data);\n        // console.log(JSON.stringify(data, null , 2));\n      });\n  }, [props.topic]);\n\n\n  return (\n    <Column>\n      <GenericChart\n        topic={props.topic}\n        unit={unit}\n        label={label}\n        data={data}\n      />\n      <DataTable \n        data={data}\n        unit={unit}\n        label={label}\n      />\n    </Column>\n  );\n};\n","import React, {useEffect, useState} from 'react';\nimport Page from \"../components/page.js\";\nimport {Column, Row} from \"../components/layout.js\";\nimport {TopicChart, TableOfTopics} from \"./topics.js\";\nimport {URL, GETTOPICS, url_replacement} from \"../util.js\";\nimport {Route, Switch} from \"react-router-dom\";\n\nconst DashBoard = (props) => {\n  const routeUrl = \"/t/\";\n  const [topics, setTopics] = useState([]);\n\n  useEffect(()=> {\n    fetch(URL + GETTOPICS)\n      .then((res) => res.json())\n      .then((data) => {\n        // generate the routeUrl's from the fetch'd data\n        for(let i=0; i<data.length; i++){\n          data[i][\"routeUrl\"] = routeUrl + url_replacement(data[i][\"topic\"]); \n        }\n        setTopics(data);\n      });\n  }, []);\n\n  const charts = topics.map((r,i) => {\n    return(\n      <Route key={i} exact path={r.routeUrl}>\n        <TopicChart topic={r.topic}/>\n      </Route>\n    );\n  });\n\n  return(\n    <Page>\n      <Column>\n        <Row>\n          <TableOfTopics routeUrl={routeUrl} topics={topics}/>\n        </Row>\n        <Row>\n          <Switch>\n            {charts}\n          </Switch>\n        </Row>\n      </Column>\n    </Page>\n  );\n}\n\n\nexport default DashBoard;","import React from 'react';\n\nexport const Form = (props) => {\n  return(\n    <form onSubmit={props.onSubmit}>\n      {props.children}\n    </form>\n  );\n}\n\nexport const FormItem = (props) => {\n  return(\n    <div className=\"form-label\">\n      <label>{props.children}</label>\n      <input name={props.name} placeholder={props.placeholder} onChange={props.onChange} type={props.type}/>\n    </div>\n  );\n}\n\nexport const FormButton = (props) => {\n  return(\n    <input className=\"form-button\" type=\"submit\" value={props.label}/>\n  );\n}","import React from 'react';\n\nconst Toggle = (props) => {\n  return(\n    <label className={\"switch \" + props.className}>\n      <input type=\"checkbox\" onClick={props.onClick}/>\n      <span className=\"slider\"></span>\n    </label>\n  );\n}\nexport default Toggle;","import React, {useState, useEffect} from 'react';\nimport {Table, TableHead, TableRow, TableItem} from \"../components/table.js\";\nimport {Form, FormItem, FormButton} from \"../components/form.js\";\nimport {URL, GETSUB} from \"../util.js\";\nimport qs from \"querystring\";\nimport Toggle from '../components/toggle.js';\nimport {Row, Column} from '../components/layout.js';\n\nconst TableOfSubs = (props) => {\n  const [toggleDel, setToggleDel] = useState(false);\n  const [subs, setSubs] = useState([]);\n  const [newSub, setNewSub] = useState(\"\");\n  const [newQos, setNewQos] = useState(0);\n  const [refetch, setRefetch] = useState(false);\n\n  useEffect(()=> {\n    fetch(URL+GETSUB)\n      .then((res) => res.json())\n      .then((data) => {\n        setSubs(data);\n      });\n    \n  }, [refetch]);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const reqOpt = {\n      method: 'POST',\n      headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n      body: qs.stringify({topic: newSub, qos: newQos}),\n    }\n    fetch(URL+GETSUB, reqOpt)\n      .then((res) => {\n        if (! res.ok){\n          throw new Error(res.status)\n        } else return res;\n      })\n      .then(()=> setRefetch(!refetch)) // reload the subscriptions\n      .catch((err) => console.log(err));\n  }\n\n  const handleChange = (event) => {\n    if (event.target.name === \"sub\"){\n      setNewSub(event.target.value);\n    }\n    if (event.target.name === \"qos\"){\n      setNewQos(event.target.value);\n    }\n  }\n\n  const handleDelete = (event) => {\n    if (toggleDel){\n      const reqOpt = {\n        method: \"DELETE\",\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n        body: qs.stringify({topic:event.target.id})\n      }\n      fetch(URL+GETSUB, reqOpt)\n        .then((res)=>{\n          if(!res.ok){\n            throw new Error(res.status);\n          } else return res;\n        })\n        .then(() => setRefetch(!refetch))\n        .catch((err) => console.log(err));\n    }\n  }\n  \n  const handleToggle = (event) => {\n    setToggleDel(event.target.checked);\n  }\n\n  const rows = subs.map((r, i) => {\n    return(\n      <TableRow key={i}>\n        <TableItem>{r[\"topic\"]}</TableItem>\n        <TableItem>{r[\"qos\"]}</TableItem>\n        <TableItem>\n          <i \n            onClick={handleDelete} \n            name={r.topic}\n            id={r.topic} \n            className={\"fas fa-times \" + (toggleDel && \"link\")}\n          />\n        </TableItem>\n      </TableRow>\n    );\n  });\n\n  return(\n    <Column>\n      <SubForm onSubmit={handleSubmit} onChange={handleChange}/>\n      <Row className=\"top\">\n        <Table>\n          <TableRow>\n            <TableHead>Subscription</TableHead>\n            <TableHead>QoS</TableHead>\n            <TableHead>\n              <Toggle onClick={handleToggle} className=\"table-toggle\"/>\n            </TableHead>\n          </TableRow>\n          {rows}\n        </Table>\n      </Row>\n    </Column>\n  );\n}\n\nconst SubForm = (props) =>{\n  return(\n    <Form onSubmit={props.onSubmit}>\n      <h3>Subscribe</h3>\n      <FormItem type=\"text\" onChange={props.onChange} name=\"sub\">\n        Topic\n      </FormItem>\n      <FormItem type=\"text\" onChange={props.onChange} placeholder={0} name=\"qos\">\n        QoS\n      </FormItem>\n      <FormButton label=\"Subscribe\"/>\n    </Form>\n  );\n}\n\nexport default TableOfSubs;","import React, {useEffect, useState} from 'react';\nimport GenericChart from '../data/chart';\nimport {upperFirstLetter, usePrevious} from '../util.js';\n\nexport const LiveChart = (props) => {\n  const label = upperFirstLetter(props.topic.split(\"/\")[props.topic.split(\"/\").length-2]);\n  const unit = props.topic.split(\"/\")[props.topic.split(\"/\").length-1];\n  \n  return(\n    <GenericChart\n      topic={props.topic}\n      unit={unit}\n      label={label}\n      data={props.data}\n    />\n  );\n}\nexport default LiveChart;","import React, {useState, useEffect} from 'react';\nimport {Table, TableHead, TableRow, TableItem} from \"../components/table.js\";\nimport qs from \"querystring\";\nimport { URL, GETTOPICS, usePrevious } from '../util.js';\nimport Toggle from '../components/toggle.js';\nimport {Column} from '../components/layout';\nimport LiveChart from './chart';\n\nconst LiveTopics = (props) => {\n  const [toggleDel, setToggleDel] = useState(false);\n  // topics for the live topic table\n  const [topics, setTopics] = useState([]);\n  const [liveTopic, setLiveTopic] = useState(\"\");\n  const [chartData, setChartData] = useState([]);\n  \n  const prevTopic = usePrevious(liveTopic)\n\n  useEffect(() => {\n    props.ws.onmessage = (event) => {\n      var data = JSON.parse(event.data);\n      if (data.response === \"newtopic\"){\n        setTopics(data.payload);\n      }\n      if (data.response === \"newdata\"){\n        // check if the topics line up, if they don't, reset the chart data\n        var newChartData = [];\n\n        if (liveTopic === prevTopic){\n          newChartData = [...chartData];\n        }\n\n        var messages = data.payload.messages\n        for (let i=0; i<messages.length; i++){\n          messages[i].message = parseFloat(messages[i].message);\n          messages[i].createdAt = Date.parse(messages[i].createdAt);\n          newChartData.push(messages[i]);\n        }\n        setChartData(newChartData);\n      }\n    }\n  })\n\n  // delete topics & it's msgs from the database\n  const handleDelete = (event) =>{\n    if (toggleDel){\n      const reqOpt = {\n        method: \"DELETE\",\n        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n        body: qs.stringify({topic:event.target.id})\n      }\n      fetch(URL+GETTOPICS, reqOpt)\n        .then((res)=>{\n          if(!res.ok){\n            throw new Error(res.status);\n          } else return res;\n        })\n        .then(() => props.ws.send(JSON.stringify({request:'delete'})))\n        .catch((err) => console.log(err));\n      // after deletion, we need to force the local data array to reset\n    }\n  }\n\n  // toggle allow deletion on the client\n  const handleSwitch = (event) => {\n    setToggleDel(event.target.checked);\n  }\n\n  // handle clicking on a live topic\n  const handleClick = (event) => {\n    setLiveTopic(event.target.id);\n    var txData = (JSON.stringify({\n      request: \"live\",\n      payload: {\n        topic: event.target.id\n      }\n    }))\n    props.ws.send(txData);\n  }\n\n  const rows = topics.map((r,i) => {\n    return(\n      <TableRow key={i}>\n        <TableItem className=\"link\" onClick={handleClick} id={r.topic}>\n          {r.topic}\n        </TableItem>\n        <TableItem>\n          <i \n            onClick={handleDelete} \n            name={r.topic}\n            id={r.topic} \n            className={\"fas fa-times \" + (toggleDel && \"link\")}\n          />\n        </TableItem>\n      </TableRow>\n    );\n  });\n\n  return(\n    <Column>\n      {liveTopic && <LiveChart ws={props.ws} topic={liveTopic} data={chartData}/>}\n      <Table>\n        <TableRow>\n          <TableHead>Live Graph</TableHead>\n          <TableHead>\n            <Toggle onClick={handleSwitch} className=\"table-toggle\"/>\n          </TableHead>\n        </TableRow>\n        {rows}\n      </Table>\n    </Column>\n  )\n}\nexport default LiveTopics;","import React from 'react';\nimport {Form, FormItem, FormButton} from '../components/form.js';\n\nconst LivePublisher = (props) =>{\n  return(\n    <Form onSubmit={props.onSubmit}>\n      <h3>Publish</h3>\n      <FormItem type='text' onChange={props.onChange} name=\"topic\">\n        Topic\n      </FormItem>\n      <FormItem type='text' onChange={props.onChange} name=\"message\">\n        Message\n      </FormItem>\n      <FormItem type='text' placeholder={0} onChange={props.onChange} name=\"qos\">\n        QoS\n      </FormItem>\n      <FormButton label=\"Publish\"/>\n    </Form>\n  );\n}\nexport default LivePublisher;","import React, { useEffect, useState, useRef } from 'react';\nimport TableOfSubs from \"./subs\";\nimport {Row, Column} from \"../components/layout.js\";\nimport Page from '../components/page.js';\nimport {WEBSOCKET} from '../util';\nimport LiveTopics from './table.js';\nimport LivePublisher from './publisher.js';\n\nclass LiveDash extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {};\n  }\n  ws = new WebSocket(WEBSOCKET);\n\n  componentDidMount(){\n    this.ws.onopen = () => {\n      console.log(\"websocket connected\");\n    }\n    this.ws.onclose = () => {\n      console.log(\"websocket closed\");\n    }\n  }\n\n  componentWillUnmount(){\n    this.ws.close();\n  }\n\n  render(){\n    return(\n      <Page>\n        <Column>\n          <Row>\n            <LiveTopics ws={this.ws}/>\n          </Row>\n          <Row className=\"top space\">\n            <Row>\n              <LivePublisher ws={this.ws}/>\n            </Row>\n            <Column className=\"top\">\n              <TableOfSubs/>\n            </Column>\n          </Row>\n        </Column>\n      </Page>\n    );\n  }\n\n}\n\nexport default LiveDash;","import React from 'react';\nimport {Column} from '../components/layout';\n\nconst Footer = (props) => {\n  return(\n    <footer className=\"footer\">\n      <Column>\n        <a href=\"https://enochchau.com\">\n          <div>Enoch Chau</div>\n          <div>2021</div>\n        </a>\n      </Column>\n      <a href=\"https://github.com/ec965/mcutie\">\n        <i className=\"fab fa-github\"></i>\n      </a>\n    </footer>\n  )\n}\n\nexport default Footer;","import React from 'react';\nimport {NavBar, NavItem, NavLogo, NavGroup} from \"./navitems.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport DashBoard from \"../data/index.js\"\nimport LiveDash from '../livedash/index.js'\nimport Footer from \"./footer\";\n\nconst MyNavBar = (props) => {\n  return(\n    <Router>\n      \n      <NavBar>\n        <NavGroup>\n          <NavLogo>\n            <Link to=\"/\">MCutie</Link>\n          </NavLogo>\n          <NavItem>\n            <Link to=\"/t\">\n              <i className=\"fas fa-chart-line\"></i>\n            </Link>\n          </NavItem>\n        </NavGroup>\n        {/* <NavGroup>\n          <h1>h1</h1>\n          <h2>h2</h2>\n          <h3>h3</h3>\n          <h4>h4</h4>\n          <h5>h5</h5>\n          <h6>h6</h6>\n          <p>p</p>\n        </NavGroup> */}\n      </NavBar>\n\n      <Switch>\n        <Route path=\"/t\">\n          <DashBoard/>\n        </Route>\n        <Route path=\"/\">\n          <LiveDash/>\n        </Route>\n      </Switch>\n\n      <Footer/>\n    </Router>\n  );\n}\n\nexport default MyNavBar;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport './css/stylesheet.css';\nimport MyNavBar from \"./nav/index.js\";\n\nconst App = (props) => {\n  return (\n    <MyNavBar/>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}